function e(e,t,a=(e=>e)){const c=Object.create(null);c.options=t||{},c.reviver=a,c.value="",c.entry=[],c.output=[],c.col=1,c.row=1;const s=/"|,|\r\n|\n|\r|[^",\r\n]+/y,n=/^(\r\n|\n|\r)$/;let l=[],u="",i=0;for(;null!==(l=s.exec(e));)switch(u=l[0],i){case 0:switch(!0){case'"'===u:i=3;break;case","===u:i=0,r(c);break;case n.test(u):i=0,r(c),o(c);break;default:c.value+=u,i=2}break;case 2:switch(!0){case","===u:i=0,r(c);break;case n.test(u):i=0,r(c),o(c);break;default:throw i=4,Error(`CSVError: Illegal state [row:${c.row}, col:${c.col}]`)}break;case 3:switch(!0){case'"'===u:i=4;break;default:i=3,c.value+=u}break;case 4:switch(!0){case'"'===u:i=3,c.value+=u;break;case","===u:i=0,r(c);break;case n.test(u):i=0,r(c),o(c);break;default:throw Error(`CSVError: Illegal state [row:${c.row}, col:${c.col}]`)}}return 0!==c.entry.length&&(r(c),o(c)),c.output}function t(e,t={},r=(e=>e)){const o=Object.create(null);o.options=t,o.options.eof=void 0===o.options.eof||o.options.eof,o.row=1,o.col=1,o.output="";const a=/"|,|\r\n|\n|\r/;return e.forEach((t,c)=>{let s="";switch(o.col=1,t.forEach((e,c)=>{"string"==typeof e&&(e=e.replace('"','""'),e=a.test(e)?`"${e}"`:e),s+=r(e,o.row,o.col),c!==t.length-1&&(s+=","),o.col++}),!0){case o.options.eof:case!o.options.eof&&c!==e.length-1:o.output+=s+"\n";break;default:o.output+=""+s}o.row++}),o.output}function r(e){const t=e.options.typed?function(e){switch(!0){case"true"===e:case"false"===e:return"true"===e;case/.\./.test(e):return parseFloat(e);case isFinite(e):return parseInt(e);default:return e}}(e.value):e.value;e.entry.push(e.reviver(t,e.row,e.col)),e.value="",e.col++}function o(e){e.output.push(e.entry),e.entry=[],e.row++,e.col=1}export{e as parse,t as stringify};
